<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-button/paper-button.html">

<!--
`uvalib-search-box`
Library Search Box

@demo demo/index.html
-->

<dom-module id="uvalib-search-box">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }
    </style>
    <div class="">
      <paper-tabs selected="0" no-bar no-slide noink>
        <paper-tab>{{virgoSearchTabText}}</paper-tab>
        <template is="dom-if" if="{{siteSearch}}">
          <paper-tab link>
            <a href="{{siteSearchUrl}}" class="link" tabindex="-1">{{siteSearchTabText}}</a>
          </paper-tab>
        </template>
      </paper-tabs>
      <iron-pages selected="0">
        <paper-input name="q" label="" placeholder="{{searchBoxPlaceholder}}"><paper-button>Search</paper-button></paper-input>

        <template is="dom-if" if="{{_advancedSearch}}">

          <div class="advancedSearch">

            <template is="dom-if" if="{{advancedCatalogSearch}}">
              <div class="searchLink">
                <a href="{{advancedCatalogSearchUrl}}">{{advancedCatalogSearchText}}</a>
              </div>
            </template>

            <template is="dom-if" if="{{advancedArticleSearch}}">
              <div class="searchLink">
                <a href="{{advancedArticleSearchUrl}}">{{advancedArticleSearchText}}</a>
              </div>
            </template>

          </div>

        </template>

      </iron-pages>
    </div>
  </template>

  <script>
    Polymer({

      is: 'uvalib-search-box',

      properties: {
        advancedArticleSearch: {
          type: Boolean,
          value: false
        },

        advancedArticleSearchText: {
          type: String,
          value: 'Article Advanced Search'
        },

        advancedArticleSearchUrl: {
          type: String,
          value: '//search.lib.virginia.edu/articles/advanced?catalog_select=articles'
        },

        advancedCatalogSearch: {
          type: Boolean,
          value: false
        },

        advancedCatalogSearchText: {
          type: String,
          value: 'Catalog Advanced Search'
        },

        advancedCatalogSearchUrl: {
          type: String,
          value: '//search.lib.virginia.edu/advanced?catalog_select=catalog'
          },

        _advancedSearch: {
          type: Boolean,
          computed: '_either(advancedCatalogSearch,advancedArticleSearch)'
        },

        searchBoxPlaceholder: {
          type: String,
          value: 'Search Virgo for books, articles, digital materials, and more.',
        },

        siteSearch: {
          type: Boolean,
          value: false
        },

        siteSearchTabText: {
          type: String,
          value: 'Site Search',
        },

        siteSearchUrl: {
          type: String,
          value: '//www.library.virginia.edu/sitesearch/',
        },

        virgoSearchTabText: {
          type: String,
          value: 'UVA Libraries Search'
        },

        virgoSearchTabUrl: {
          type: String,
          value: '//search.lib.virginia.edu/catalog'
        },
      },

      /**
       * Returns the boolean result for **a OR b**.
       *
       * @param {Boolean} a
       * @param {Boolean} a
       */
      _either: function(a,b) {
        return (a || b);
      },

    });
  </script>
</dom-module>
